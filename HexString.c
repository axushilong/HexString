#include "HexString.h"

static const uint8_t sucHex[16]={'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
static const uint8_t sucStr[]={0,1,2,3,4,5,6,7,8,9,0,0,0,0,0,0,0,10,11,12,13,14,15};

/**
  * @brief  Hex数据转换到String数据,比如0x31 对应就是 0x33 0x31
  * @note   转出后的字母ABCDEF是大写的
  * @param  [in] pucHex 要转换的Hex数据块指针
  * @param  [in] usLength 要转换的Hex数据块大小
  * @param  [out] pcDesStr 要保存的String数据的位置
  * @retval None
  */
void vNHexToString(uint8_t * pucHex,uint16_t usLength,char * pcDesStr){
	uint16_t usI;
	uint16_t usJ;
	for(usI = 0;usI < usLength;usI++){
		usJ = usI<<1;
		pcDesStr[usJ] = sucHex[pucHex[usI]/16];
		pcDesStr[usJ+1] = sucHex[pucHex[usI]%16];
	}
//	pcDesStr[usJ+2] = 0;
}

/**
  * @brief  String数据转换到Hex数据，比如0x33 0x31 对应就 0x31
  * @note   传入的String字母ABCDEF必须大写
  * @param  [in] pcString 要转换的String数据块指针
  * @param  [in] usLength 要转换的String数据块大小
  * @param  [out] pucDesHex 要保存的Hex数据的位置
  * @retval None
  */
void vStringToNHex(char * pcString,uint16_t usLength,uint8_t * pucDesHex){
	uint16_t usI=0;
	while(usI < usLength){
		pucDesHex[usI>>1] = (sucStr[pcString[usI]-0x30]<<4) + sucStr[pcString[usI+1]-0x30];
		usI +=2;
	}
}

/**
  * @brief  Hex数据转换到String数据比如传入0x31返回0x33 0x31
  * @note   转出后的字母ABCDEF是大写的；注意：返回的String数据末尾不会加\0
  * @param  [in] ucHex 要转换的Hex数据
  * @param  [in] pcString 返回转换后的String值,返回的String数据末尾不会加\0
  * @retval None
  */
void vHexToString(uint8_t ucHex,uint8_t * pucString){
	pucString[0] = sucHex[ucHex>>4];
	pucString[1] = sucHex[ucHex&0x0f];
}

/**
  * @brief  String数据转换到Hex数据，比如传入"31"返回0x31
  * @note   传入的String字母ABCDEF必须大写
  * @param  [in] pcString 要转换的String数据指针
  * @retval 返回转换后的Hex值
  */
uint8_t ucStringToHex(char * pcString){
	uint8_t ucHex=0;
	ucHex = (sucStr[pcString[0]-0x30]<<4) + sucStr[pcString[1]-0x30];
	return ucHex;
}

/**
  * @brief  Hex数据字符串形式转换到十进制数据比如传入0x31返回31(0x1f)
  * @note   
  * @param  [in] ucHex 要转换的Hex数据
  * @param  [in] pcString 返回转换后的String值,返回的String数据末尾不会加\0
  * @retval 返回十进制值
  */
DE_Inline uint8_t vHexToDec(uint8_t ucHex,uint8_t * pucDecember){
	*pucDecember = ((ucHex & 0xf0)>>4)*10 + (ucHex & 0x0f);
	return *pucDecember;
}

uint8_t HexToDec[154] = {
0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x00,0x00,0x00,0x00,0x00,0x00,
0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x00,0x00,0x00,0x00,0x00,0x00,
0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x00,0x00,0x00,0x00,0x00,0x00,
0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x00,0x00,0x00,0x00,0x00,0x00,
0x28,0x29,0x2a,0x2b,0x2c,0x2d,0x2e,0x2f,0x30,0x31,0x00,0x00,0x00,0x00,0x00,0x00,
0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x3a,0x3b,0x00,0x00,0x00,0x00,0x00,0x00,
0x3c,0x3d,0x3e,0x3f,0x40,0x41,0x42,0x43,0x44,0x45,0x00,0x00,0x00,0x00,0x00,0x00,
0x46,0x47,0x48,0x49,0x4a,0x4b,0x4c,0x4d,0x4e,0x4f,0x00,0x00,0x00,0x00,0x00,0x00,
0x50,0x51,0x52,0x53,0x54,0x55,0x56,0x57,0x58,0x59,0x00,0x00,0x00,0x00,0x00,0x00,
0x5a,0x5b,0x5c,0x5d,0x5e,0x5f,0x60,0x61,0x62,0x63
};

/*-------------------(C) COPYRIGHT 2020 头条@单片机嵌入式爱好者 ----------------*/
